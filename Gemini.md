# アナログ風デジタル時計アプリ 仕様書・設計書

## 1. 概要 📝  
本ドキュメントは、**Flutter** で開発する「アナログ風デジタル時計」アプリケーションの仕様と設計を定義するものです。  

### 1.1 アプリコンセプト  
> **「時の流れを、もっと楽しく、心地よく。」**  
アナログ時計が持つ針の動きや盤面の美しさと、デジタル時計の視認性を融合。レトロで遊び心のあるアニメーションにより、ユーザーの日常に彩りを加えることを目指します。

### 1.2 ターゲットユーザー  
- デザインやガジェットにこだわりのある方  
- PC 作業中に癒やしや遊び心を求める方  
- 標準の時計アプリに物足りなさを感じている方  

---

## 2. アプリ仕様 📱  

### 2.1 機能要件  

#### 2.1.1 時計表示機能（MVP）  
- **時刻表示**: 現在の「時」「分」「秒」をデジタル数字で表示  
- **アナログ風アニメーション**  
  - **秒の表示**: 秒を表すデジタル数字／インジケーターが円周上を滑らかに移動  
  - **分の表示**: 1 分ごとにデジタル数字をアニメーション（フリップ式など）で更新  
  - **時の表示**: 1 時間ごとにデジタル数字をアニメーションで更新  
- **デザイン**  
  - 背景にアナログ時計の文字盤ガイド（目盛り）を表示  
  - フォントはレトロな 7 セグメント／ドットマトリクス風  

#### 2.1.2 カスタマイズ機能 🎨  
- **テーマカラー変更**  
  - 背景色・文字色・アクセントカラーをプリセットまたはカラーピッカーで選択  
- **表示スタイル変更**  
  - デジタル数字のフォントを複数から選択（7 セグメント／ドットマトリクス／手書き風 など）  
- **秒表示の変更**  
  - 「円周上を動く数字」／「中央で点滅するドット」などを切り替え可能  

### 2.2 非機能要件  
- **パフォーマンス**: 60 fps で滑らかな描画。CPU 負荷とバッテリー消費を最小化  
- **対応プラットフォーム**: iOS・Android（将来的に Windows / macOS 対応）  
- **操作性**: 直感的で分かりやすい UI。設定変更が容易  

---

## 3. アプリ設計 📐  

### 3.1 アーキテクチャ  
- **状態管理**: `Riverpod`  
  - *理由*: Provider のシンプルさと宣言的・テスト容易性を両立  
- **ディレクトリ構成**（Feature‑First）  

```plaintext
lib/
├── main.dart
├── core/                  # 共有コア
│   ├── providers/         # Riverpod Provider
│   └── theme/             # テーマデータ
├── features/
│   ├── clock/             # 時計表示
│   │   ├── views/         # 画面
│   │   │   └── clock_screen.dart
│   │   ├── widgets/       # UI コンポーネント
│   │   │   ├── digital_number_widget.dart
│   │   │   └── clock_painter.dart
│   │   └── providers.dart
│   └── settings/          # 設定
│       ├── views/
│       │   └── settings_screen.dart
│       └── providers.dart
└── shared/
    └── models/
        └── app_settings.dart
```
## 3.2 UI / 画面設計

### 3.2.1 メイン画面（ClockScreen）
- **レイアウト**  
  - `Stack` で背景（アナログ文字盤）と前景（デジタル数字）を重ねる  
  - 中央に **時・分** を大きく配置  
  - **秒** は円周上を動くインジケーターで表現  
- **描画**  
  - `CustomPaint` / `CustomPainter` で文字盤や秒針軌道を描画  
- **アニメーション**  
  - **秒の動き**: `Timer.periodic` + `Transform` 系ウィジェット  
  - **時・分の変化**: `AnimatedSwitcher` でフェード／スライド  

### 3.2.2 設定画面（SettingsScreen）
- **レイアウト**  
  - `ListView`／`Column` で設定項目をリスト表示  
- **コンポーネント**  
  - **テーマ選択**: 色の円／四角をタップで切替  
  - **フォント選択**: `DropdownButton`／`RadioListTile`  
  - **変更結果** は即座にプレビューまたはメイン画面へ反映  

---

## 3.3 データフロー
1. **時刻取得**  
   - `Timer.periodic(Duration(seconds: 1), …)` で 1秒ごとに現在時刻を取得  
2. **UI 更新**  
   - `ClockScreen` が `ref.watch` で時刻 Provider を監視  
   - `CustomPainter` が秒インジケーター位置を再計算  
3. **設定の永続化**  
   - 設定変更 → `StateNotifierProvider` へ保持  
   - `shared_preferences` でローカル保存  
   - アプリ起動時に保存済み設定を復元  

---

## 3.4 使用する主要パッケージ

| 用途           | パッケージ               |
| -------------- | ------------------------ |
| 状態管理       | `flutter_riverpod`       |
| レトロフォント | `google_fonts`           |
| 設定永続化     | `shared_preferences`     |
| 時刻フォーマット | `intl` (必要に応じて)   |
| カラーピッカー | `flutter_colorpicker` (任意) |

---

## 3.5 開発マイルストーン（推奨）
1. **フェーズ 1: 基本表示**  
   - 静的なデジタル時計（時・分・秒）表示  
   - `CustomPaint` でアナログ風背景描画  
2. **フェーズ 2: アニメーション実装**  
   - `Timer` + Provider 連携で 1秒更新  
   - 秒インジケーターの円周アニメーション  
   - `AnimatedSwitcher` で分・時切替アニメーション  
3. **フェーズ 3: カスタマイズ機能**  
   - 設定画面 UI 作成  
   - テーマカラー・フォント変更 & 保存機能  
4. **フェーズ 4: リファイン**  
   - デザイン微調整・パフォーマンス最適化  
   - アプリアイコン設定 & 各プラットフォーム向けビルド準備  
